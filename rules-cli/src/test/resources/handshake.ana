workflow 'handshake' ruleset 'HArd_caps' 'HS_CARGO_ORDERS_BUSINESS_RULE' order.store_type_store = 'restaurant_cargo' OR order.store_type contains '_cargo' return allow 'HS_PAYMENT_METHOD_CASH_RULE' order.payment_method = 'cash' return allow 'HS_TURBO_BUSINESS_RULE' order.store_type_store = 'turbo' return allow 'HS_RAPPICASH_BUSINESS_RULE' order.store_type_store = 'ultraservicio' return prevent 'HS_COURIER_HOURS_BUSINESS_RULE' order.store_type_store = 'courier_hours' return prevent 'HS_HARDCAP_BY_AMOUNT' order.total_value > 14193 return prevent 'HS_NEW_RT_1D' dateDiff(day, currentDate(), storekeeper.created_at) < 2 return prevent 'HS_NEW_RT_60D' dateDiff(day, currentDate(), storekeeper.created_at) < 60 and order.total_value> 8800 return prevent 'HS_NEW_RT_7D' dateDiff(day, currentDate(), storekeeper.created_at) < 7 and order.total_value> 1700 return prevent 'HS_NEW_RT_14D' (dateDiff(day, currentDate(), storekeeper.created_at) < 14) and order.total_value> 3200 return prevent 'HS_NEW_RT_30D' (dateDiff(day, currentDate(), storekeeper.created_at) < 30) and order.total_value> 5700 return prevent 'HS_TOTAL_TICKETS_QTY_30D ' (features.sk_tickets_qty_igrt_last_30d + features.sk_tickets_qty_mpnfe_last_30d) > 1 return prevent 'HS_finisehd_orders_qty_in_less_than_10mins' features.sk_orders_finished_in_less_than_10m_qty_last_1d > 4 return prevent 'HS_NEW_USER_7D' dateDiff(day, currentDate(), user.created_at) < 7 and order.total_value> 1700 return prevent 'HS_NEW_USER_14D' dateDiff(day, currentDate(), user.created_at) < 14 and order.total_value> 4000 return prevent 'HS_NEW_USER_30D' dateDiff(day, currentDate(), user.created_at) < 30 and order.total_value> 6400 return prevent 'HS_TOTAL_COMPENSATIONS_USERS_QTY_7D ' features.user_compensations_amount_7d > (0.15*features.user_compensations_total_amount) return prevent default allow end
